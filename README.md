# üõçÔ∏è Online Store Backend API

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–æ–º —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª—å—é –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- üîê JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (admin/user —Ä–æ–ª–∏)
- üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- üõí –°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤ —Å –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–µ–π
- ‚≠ê –û—Ç–∑—ã–≤—ã –Ω–∞ —Ç–æ–≤–∞—Ä—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- üì∏ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
- üìä Dashboard —Å –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º
- üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV/Excel
- üö® –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- üìâ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ —Å–ø–æ—Å–æ–±–∞–º –æ–ø–ª–∞—Ç—ã

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞
\`\`\`bash
make deploy
\`\`\`

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:5000

### –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- **Admin**: admin@admin.admin / admin@admin.admin  
- **User**: test@test.test / test@test.test

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é](DEPLOYMENT.md)
- [üìã API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤](API_DOCUMENTATION_ADMIN.md)
- [‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ endpoints](ADMIN_ENDPOINTS_QUICK_REFERENCE.md)

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **.NET 9.0** - Framework
- **PostgreSQL** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Entity Framework Core** - ORM
- **JWT** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Swagger** - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **Docker** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **EPPlus** - –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
- **CsvHelper** - –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV

## üìä API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- POST /register - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- POST /login - –í—Ö–æ–¥

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- GET /api/admin/reports/dashboard - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- GET /api/admin/reports/sales/daily - –î–Ω–µ–≤–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏
- GET /api/admin/reports/sales/period - –ü—Ä–æ–¥–∞–∂–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
- GET /api/admin/reports/revenue/monthly - –ü–æ–º–µ—Å—è—á–Ω–∞—è –≤—ã—Ä—É—á–∫–∞
- GET /api/admin/reports/top-products - –¢–æ–ø —Ç–æ–≤–∞—Ä—ã
- GET /api/admin/reports/sales-by-category - –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- GET /api/admin/reports/payment-methods - –ü–æ —Å–ø–æ—Å–æ–±–∞–º –æ–ø–ª–∞—Ç—ã

### –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- GET /api/admin/export/products/csv - –¢–æ–≤–∞—Ä—ã (CSV)
- GET /api/admin/export/products/excel - –¢–æ–≤–∞—Ä—ã (Excel)
- GET /api/admin/export/orders/csv - –ó–∞–∫–∞–∑—ã (CSV)
- GET /api/admin/export/orders/excel - –ó–∞–∫–∞–∑—ã (Excel)
- GET /api/admin/export/sales-report/csv - –û—Ç—á–µ—Ç (CSV)
- GET /api/admin/export/sales-report/excel - –û—Ç—á–µ—Ç (Excel)
- GET /api/admin/export/inventory/csv - –°–∫–ª–∞–¥—Ç—Å–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ (CSV)
- GET /api/admin/export/inventory/excel - –°–∫–ª–∞–¥—Å–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ (Excel)

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫: http://localhost:5000/swagger

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

\`\`\`bash
make deploy      # –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
make up          # –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
make down        # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
make logs        # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏
make logs-api    # –õ–æ–≥–∏ API
make logs-db     # –õ–æ–≥–∏ –ë–î
make health      # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API
make help        # –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º
\`\`\`

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

\`\`\`
cl-backend/
‚îú‚îÄ‚îÄ cl-backend/           # –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç
‚îÇ   ‚îú‚îÄ‚îÄ Controllers/      # API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ Models/          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ DTO/             # Data Transfer Objects
‚îÇ   ‚îú‚îÄ‚îÄ Services/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ DbContexts/      # EF –∫–æ–Ω—Ç–µ–∫—Å—Ç
‚îÇ   ‚îî‚îÄ‚îÄ Utils/           # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ Dockerfile           # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml   # Docker Compose
‚îú‚îÄ‚îÄ Makefile            # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md           # –≠—Ç–æ —Ñ–∞–π–ª
\`\`\`

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ \`.env\`:

\`\`\`env
POSTGRES_DB=cl_backend_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=210176
POSTGRES_PORT=54321
API_PORT=5000
\`\`\`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API
\`\`\`bash
curl http://localhost:5000/swagger/index.html
\`\`\`

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
\`\`\`bash
curl -X POST http://localhost:5000/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin@admin.admin",
    "password": "admin@admin.admin"
  }'
\`\`\`

### –ó–∞–ø—Ä–æ—Å —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
\`\`\`bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:5000/api/admin/reports/dashboard
\`\`\`

## üì¶ –ß—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ \`make deploy\`:
1. ‚úÖ –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤
2. ‚úÖ –ó–∞–ø—É—Å–∫ PostgreSQL
3. ‚úÖ –ó–∞–ø—É—Å–∫ API
4. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
5. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API

## üõü Troubleshooting

### API –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
\`\`\`bash
make logs-api  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
\`\`\`

### –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –≤—Å–µ —Å –Ω—É–ª—è
\`\`\`bash
make clean     # –£–¥–∞–ª–∏—Ç—å –≤—Å–µ
make deploy    # –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∑–∞–Ω–æ–≤–æ
\`\`\`

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
\`\`\`bash
make db-shell  # –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
make db-backup # –°–æ–∑–¥–∞—Ç—å backup
\`\`\`

## üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–º. [API_DOCUMENTATION_ADMIN.md](API_DOCUMENTATION_ADMIN.md)
