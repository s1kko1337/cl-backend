# –ë—ã—Å—Ç—Ä—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ API Endpoints

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –û—Ç—á–µ—Ç—ã (`/api/admin/reports`)

| ‚Ññ | Endpoint | –ú–µ—Ç–æ–¥ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|----------|-------|-----------|----------|
| 1 | `/sales/daily` | GET | `days` (int, default: 30) | –î–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ |
| 2 | `/sales/period` | GET | `from`, `to` (DateTime) | –û—Ç—á–µ—Ç –∑–∞ –ø–µ—Ä–∏–æ–¥ |
| 3 | `/revenue/monthly` | GET | `months` (int, default: 12) | –ü–æ–º–µ—Å—è—á–Ω–∞—è –≤—ã—Ä—É—á–∫–∞ |
| 4 | `/top-products` | GET | `limit`, `from`, `to` | –¢–æ–ø –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ |
| 5 | `/sales-by-category` | GET | `from`, `to` | –ü—Ä–æ–¥–∞–∂–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º |
| 6 | `/payment-methods` | GET | `from`, `to` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–ø–æ—Å–æ–±–∞–º –æ–ø–ª–∞—Ç—ã |
| 7 | `/dashboard` | GET | - | –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è Dashboard |
| 8 | `/alerts` | GET | - | –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |

---

## üì• –≠–∫—Å–ø–æ—Ä—Ç –î–∞–Ω–Ω—ã—Ö (`/api/admin/export`)

| ‚Ññ | Endpoint | –§–æ—Ä–º–∞—Ç | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|----------|--------|-----------|----------|
| 9 | `/products/csv` | CSV | - | –≠–∫—Å–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤ |
| 10 | `/products/excel` | XLSX | - | –≠–∫—Å–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤ |
| 11 | `/orders/csv` | CSV | `from`, `to` | –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤ |
| 12 | `/orders/excel` | XLSX | `from`, `to` | –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤ |
| 13 | `/sales-report/csv` | CSV | `from`, `to` | –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º |
| 14 | `/sales-report/excel` | XLSX | `from`, `to` | –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º |
| 15 | `/top-products/csv` | CSV | `limit`, `from`, `to` | –≠–∫—Å–ø–æ—Ä—Ç —Ç–æ–ø —Ç–æ–≤–∞—Ä–æ–≤ |
| 16 | `/top-products/excel` | XLSX | `limit`, `from`, `to` | –≠–∫—Å–ø–æ—Ä—Ç —Ç–æ–ø —Ç–æ–≤–∞—Ä–æ–≤ |
| 17 | `/inventory/csv` | CSV | - | –≠–∫—Å–ø–æ—Ä—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ |
| 18 | `/inventory/excel` | XLSX | - | –≠–∫—Å–ø–æ—Ä—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ |

---

## üîê –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–í—Å–µ endpoint'—ã —Ç—Ä–µ–±—É—é—Ç:**
- ‚úÖ JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ: `Authorization: Bearer {token}`
- ‚úÖ –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `admin`

---

## üìã –§–æ—Ä–º–∞—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –î–∞—Ç—ã
```
–§–æ—Ä–º–∞—Ç: YYYY-MM-DD
–ü—Ä–∏–º–µ—Ä—ã:
  - 2024-01-01
  - 2024-11-15
```

### –ß–∏—Å–ª–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```
days: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π (1-365)
months: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—è—Ü–µ–≤ (1-60)
limit: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (1-100)
```

---

## üéØ –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ Dashboard –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
```
GET /api/admin/reports/dashboard
GET /api/admin/reports/alerts
```

### 2. –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–¥–∞–∂ –∑–∞ –º–µ—Å—è—Ü
```
GET /api/admin/reports/sales/period?from=2024-11-01&to=2024-11-30
GET /api/admin/reports/revenue/monthly?months=1
```

### 3. –ê–Ω–∞–ª–∏–∑ —Ç–æ–ø —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ –∫–≤–∞—Ä—Ç–∞–ª
```
GET /api/admin/reports/top-products?limit=20&from=2024-09-01&to=2024-11-30
```

### 4. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –¥–ª—è –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–∏
```
GET /api/admin/export/orders/excel?from=2024-11-01&to=2024-11-30
GET /api/admin/export/sales-report/excel?from=2024-11-01&to=2024-11-30
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤
```
GET /api/admin/export/inventory/excel
GET /api/admin/reports/alerts (–ø–æ–∫–∞–∂–µ—Ç —Ç–æ–≤–∞—Ä—ã —Å –Ω–∏–∑–∫–∏–º –æ—Å—Ç–∞—Ç–∫–æ–º)
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤

### JSON endpoints (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
–í–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON —Å –¥–∞–Ω–Ω—ã–º–∏

### File endpoints (—ç–∫—Å–ø–æ—Ä—Ç)
–í–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ñ–∞–π–ª—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è:
- CSV: `text/csv`
- Excel: `application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è** –∏–∑ –≤—Å–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (`Status != "Cancelled"`)
2. **–ù–∏–∑–∫–∏–π –æ—Å—Ç–∞—Ç–æ–∫** = —Ç–æ–≤–∞—Ä—ã —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º ‚â§ 10
3. **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–µ—Ä–∏–æ–¥** = –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π
4. **–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å** = UTC –¥–ª—è –≤—Å–µ—Ö –¥–∞—Ç
5. **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥** –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤ = –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω

---

## üîÑ HTTP –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤

| –ö–æ–¥ | –ó–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç |
|-----|----------|------------------|
| 200 | OK | –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å |
| 400 | Bad Request | –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã |
| 401 | Unauthorized | –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ –∏–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–µ–Ω |
| 403 | Forbidden | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ admin |
| 404 | Not Found | –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω |
| 500 | Server Error | –û—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ |

---

## üõ†Ô∏è –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ curl

### –ü–æ–ª—É—á–∏—Ç—å Dashboard
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  https://your-api.com/api/admin/reports/dashboard
```

### –°–∫–∞—á–∞—Ç—å –æ—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º –∑–∞ –º–µ—Å—è—Ü
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "https://your-api.com/api/admin/export/sales-report/excel?from=2024-11-01&to=2024-11-30" \
  -o sales_report.xlsx
```

### –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø 10 —Ç–æ–≤–∞—Ä–æ–≤
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "https://your-api.com/api/admin/reports/top-products?limit=10" \
  | json_pp
```

---

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Android

–°–º–æ—Ç—Ä–∏ –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ **API_DOCUMENTATION_ADMIN.md**:
- Retrofit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- Data –∫–ª–∞—Å—Å—ã (Models)
- –ü—Ä–∏–º–µ—Ä—ã ViewModel
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
